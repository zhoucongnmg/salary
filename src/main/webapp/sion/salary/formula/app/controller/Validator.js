/*
 * File: app/controller/Validator.js
 *
 * This file was generated by Sencha Architect version 3.2.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('sion.salary.formula.controller.Validator', {
    extend: 'Ext.app.Controller',

    containsEqual: function() {

    },

    validate: function(str,store) {
        var message = '';
        store.each(function(record,index) {
            var text = record.get('name');
            str = str.replace('[' + text + ']','(' + Math.random()*100 + ')');
        });
        try {
            eval(str);
        }catch (e) {
            if (e.message.indexOf('Unexpected token')>-1) {
                message = e.message.replace("Unexpected token ","错误字符 '") + "'";
            }else if (e.message.indexOf('is not defined')>-1) {
                message = e.message.replace("is not defined","未定义");
            }
        }

        return message;
    },

    patch: function(re,s) {
        re=eval("/"+re+"/ig");	//不区分大小写，如须则去掉i,改为 re=eval("/"+re+"/g")
        return s.match(re).length;
    },

    cute: function(str, array) {
        var surfixStr = "";
        if (str.indexOf('[')!=-1) {
            var index = str.indexOf('[');
            str = str.substring(index+1,str.length);

            if (str.indexOf(']')!=-1) {
                var itemName = str.substring(0,str.indexOf(']'));
                array.push(itemName);
                str = str.substring(str.indexOf(']')+1,str.length);
                cute(str,array);

            }else {
                console.log("缺少']'");
            }
        }
    }

});
