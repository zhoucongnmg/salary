{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "FormulaController"
    },
    "name": "MyController",
    "designerId": "fd8c0104-b1bc-42bc-b449-7060f3f01c8a",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "Screen",
                "selector": "#Calc_Screen"
            },
            "name": "Screen",
            "designerId": "37110972-77d1-4690-ac89-9e082eed8f01"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "ItemSelection",
                "selector": "#Calc_ItemSelection"
            },
            "name": "ItemSelection",
            "designerId": "b6fb78f6-9581-4a5e-99bc-c18b2849aa28"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "value",
                    "type"
                ],
                "fn": "addInputScreen",
                "implHandler": [
                    "/*",
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    displayField = Ext.create('Ext.form.field.Display',{",
                    "        value : value,",
                    "        _type : type,",
                    "        fieldLabel : '',",
                    "        fieldStyle : 'font-family:consolas;font-size:50px;line-height:30px;margin-bottom:0px;background:none;color:#FFFFFF;text-shadow: rgb(0, 0, 0) 1px 1px 0px;'",
                    "",
                    "    }),",
                    "    inputPanel = screen.down('#inputPanel');",
                    "",
                    "",
                    "if (inputPanel._clear) {",
                    "    inputPanel.removeAll();",
                    "    inputPanel._clear = false;",
                    "}",
                    "inputPanel.add(displayField);",
                    "*/",
                    "var me = this,",
                    "    term = $('#term_demo').terminal();",
                    "term.insert(value);",
                    "term.focus(true);",
                    ""
                ]
            },
            "name": "addInputScreen",
            "designerId": "429061d4-f335-4c3f-9097-8131aac7bfe9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "text",
                    "type"
                ],
                "fn": "addOutputScreen",
                "implHandler": [
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    inputPanel = screen.down('#inputPanel'),",
                    "    outputPanel = screen.down('#outputPanel'),",
                    "    outputField = Ext.create('Ext.form.field.Display',{",
                    "        value : text,",
                    "        _type : type,",
                    "        fieldLabel : '',",
                    "        fieldStyle : 'color:#FFF;'",
                    "",
                    "    }),",
                    "    outputFields = outputPanel.query('displayfield')||[],",
                    "    displayFields = inputPanel.query('displayfield')||[],",
                    "    outputVal = outputField.getValue(),",
                    "    inputVal = me.getInputScreenValue(),",
                    "    inputField = Ext.create('Ext.form.field.Display',{",
                    "        value : inputVal,",
                    "        _type : 'Numberic',",
                    "        fieldLabel : '',",
                    "        fieldStyle : 'color:#FFF;'",
                    "",
                    "    });",
                    "",
                    "displayFields = inputPanel.query('displayfield');",
                    "",
                    "",
                    "",
                    "if (type == 'Operation') {",
                    "   if (outputFields.length>0) {",
                    "       if (inputPanel._clear == true&&outputFields[outputFields.length-1]&&outputFields[outputFields.length-1]._type=='Operation') {",
                    "            outputPanel.remove(outputFields[outputFields.length-1]);",
                    "       }else {",
                    "           outputPanel.add(inputField);",
                    "       }",
                    "    }else {",
                    "        outputPanel.add(inputField);",
                    "    }",
                    "",
                    "",
                    "    inputPanel._clear = true;",
                    "}",
                    "",
                    "outputPanel.add(outputField);"
                ]
            },
            "name": "addOutputScreen",
            "designerId": "66c8bfc7-0581-4895-95d6-f0fb0effc69b"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "clear",
                "implHandler": [
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    inputPanel = screen.down('#inputPanel');",
                    "",
                    "",
                    "me.addInputScreen(0);",
                    "inputPanel._clear = true;"
                ]
            },
            "name": "clear",
            "designerId": "d6d074c8-3f70-400f-b690-0e4dc4e1b702"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "clearAll",
                "implHandler": [
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    inputPanel = screen.down('#inputPanel'),",
                    "    outputPanel = screen.down('#outputPanel');",
                    "",
                    "outputPanel.removeAll();",
                    "me.addInputScreen(0);",
                    "inputPanel._clear = true;"
                ]
            },
            "name": "clearAll",
            "designerId": "1f305940-2518-40f6-a46e-54d793fb8827"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "back",
                "implHandler": [
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    inputPanel = screen.down('#inputPanel'),",
                    "    displayFields = inputPanel.query('displayfield')||[];",
                    "",
                    "Ext.Array.each(displayFields,function(displayField,index){",
                    "    if (index == displayFields.length-1) {",
                    "        inputPanel.remove(displayField);",
                    "    }",
                    "});"
                ]
            },
            "name": "back",
            "designerId": "cbd4e474-8349-48ef-9651-f614c3e92692"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getInputScreenValue",
                "implHandler": [
                    "var me = this,",
                    "    screen = me.getScreen(),",
                    "    inputPanel = screen.down('#inputPanel'),",
                    "    displayFields = inputPanel.query('displayfield')||[],",
                    "    inputVal = '';",
                    "",
                    "Ext.Array.each(displayFields,function(displayField,index){",
                    "    inputVal += displayField.getValue();",
                    "",
                    "});",
                    "",
                    "return parseFloat(inputVal)||inputVal;"
                ]
            },
            "name": "getInputScreenValue",
            "designerId": "a3b908d6-50ad-40dd-ad89-d6e2218d9b9e"
        }
    ]
}